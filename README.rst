# Blackjack

================================================================================================================================
Monte Carlo Method : Inverse Gambler's Fallacies in Blackjack and the Effects on Group outcomes 
================================================================================================================================

--------------------------------------------------------------------
도박 중독자의 집단 행동 패턴에 따른 강원랜드의 수익성은? 
--------------------------------------------------------------------

다수의 플레이어가 카지노에서 블랙잭을 합니다. 
손패가 21을 넘지 않는 한도에서 플레이어가 딜러보다 손패가 높아야, 
게임에 베팅한 금액을 딜러에게서 따낼 수 있습니다. 

플레이어는 기존 전략을 고수하기도 하고, 중간에 전략을 수정하기도 합니다. 
블랙잭은 다수의 플레이어와 한 명의 딜러로 게임이 이루어지며, 
경우에 따라 보험(Insurance) 옵션과 스플릿(Split) 옵션 등이 주어져 복잡한 양상으로 게임이 흘러갑니다. 
이 프로그램의 플레이어와 딜러는 1:1 대결입니다. 
Ace가 경우에 따라 1이거나 11로 계산되는 점을 포함하지만, 
그 외 카지노에 유리할 세부적인 옵션은 완전히 배제된 상태입니다. 

최대 베팅, 최소 베팅 금액 개념이 있습니다. 
초기설정은 강원랜드에 맞춰 최대 30만 원, 최소 천 원으로 베팅할 수 있습니다.
프로그램은 각 플레이어의 승패와 플레이어에게 나빴던 패, 딜러의 좋았던 패, 승률을 기록하고 문서화합니다. 
그리고 마지막에 모든 플레이어의 승률과 최종 획득금액을 모아서 통계를 낼 수 있도록 액셀화합니다. 

--------------------------------
.. image:: https://github.com/dalyulbam-cmd/Blackjack/blob/master/Sample_Image/Gangwon_Land.png
  :width: 700


--------------------------------------------------------------------
도박꾼들이 어떤 오류를 범해야 카지노에서 큰 돈을 벌까?
--------------------------------------------------------------------

대부분의 사람은 계산적이지 못합니다. 
도박에 빠진 사람들은 자기 오류의 덫에 쉽게 빠집니다. 
심리학 수업의 일환으로, Gambler's Fallacy와 Inverse Gambler's Fallacy 
그리고 그것을 확장한 개념으로 이번 문제를 접근해보았습니다. 

따라서 프로그램 내부의 플레이어는 랜덤의 확률에도 불구하고 
자신이 쥐고 있는 패와 상대방이 쥐고 있는 패, 또는 이전 게임의 승패여부에 따라 
베팅금액을 조절하기도 하고, 게임전략을 수정하기도 합니다. 결과는 변화무쌍합니다.  
전체적으로 봤을 때 플레이어 집단에 막대한 손해를 입히기도 하고, 크게 성공한 플레이어의 수를 늘리기도 합니다.

--------------------------------------------------------------------
프로그램 내부 전략모음 : 베팅 전략 
--------------------------------------------------------------------

**1. 마틴게일 베팅**
================

 순서
  1. 일반적으로 패배하면 이전 베팅액의 2배를 베팅한다. 
  2. 다만, 최대 베팅액을 넘을 수 없다. 이 경우 이길 때까지 최대 베팅을 한다. 
  3. 최대 베팅으로 승리한다 하더라도, 잔고가 최대 베팅액보다 낮으면 다시 최대 베팅을 건다. 

카지노는 일반적으로 건전한 게임 문화를 위해 베팅액의 한도를 정해놓는다고 하지만, 
도박을 아는 사람은 이것이 마틴게일 베팅을 배제하기 위한 수단이라는 사실을 알 수 있습니다.
따라서 그 한도가 낮을수록 카지노가 전체 플레이어를 대상으로 획득하는 수익률이 커집니다.  


**2. 운수 좋은 날 베팅**
================

 순서
  1. 일반적으로 마틴게일 베팅을 따른다. 
  2. 두 번 연속 승리한 사람은 오늘 운수가 좋다고 생각해 베팅금액을 계속 3배씩 올립니다. 
  3. 판돈을 3배 올렸는데 패하면, 시무룩해져서 다시 최소 베팅금액으로 돌아갑니다. 
  4. 최대 베팅액을 초과하면 계속 최대 베팅을 거는 수밖에 없습니다. 

돈을 잔뜩 잃고 강제 퇴소한 도박 중독자가 게임에서 많은 수익을 올립니다. 
그는 오늘은 하늘이 허락한 날이라는 착각에 빠집니다. 
그리고 지금까지 잃었던 돈을 단박에 벌어들이기 위해 무리한 베팅을 취합니다. 
이것은 마틴게일 베팅과 조화를 이뤄, 어떤 경우든 베팅 금액을 무리하게 올리는 결과로 이어집니다. 



--------------------------------------------------------------------
프로그램 내부 전략모음 : 게임 전략 
--------------------------------------------------------------------

**1. 기본전략**
================

가장 기본이 되는 전략입니다.
 
  1. 딜러는 손패가 17이하이면 무조건 Hit(=카드 수령)합니다.
  2. 플레이어도 기본적으로 딜러와 같은 전략을 사용합니다. 

다만, 딜러의 오픈된 패가 2~6사이일 경우, Burst될 확률이 높습니다. 
이 게임에는 한 장의 점수가 10인 카드가 제일 많은데(10,J,Q,K),
딜러의 열린 패와 닫힌 패의 합은 12~16으로, 딜러는 무조건 Hit합니다.
그리고 그 뒤에 오게 될 카드 때문에 합이 21을 넘을 확률이 큽니다. 

 ::
  3. 따라서 플레이어는 자신이 12~16일 때 딜러의 오픈된 패를 보고 Stay(=카드 거절)할 수 있습니다. 

*기본 전략, '마틴게일 베팅'으로 플레이한 1번 가상의 플레이어의 전적* 
--------------------------------
.. image:: https://github.com/dalyulbam-cmd/Blackjack/blob/master/Sample_Image/G1B1%20Player.png
  :width: 700
  
*기본 전략, '운수 좋은 날 베팅'으로 플레이한 5번 가상의 플레이어의 전적* 
--------------------------------
.. image:: https://github.com/dalyulbam-cmd/Blackjack/blob/master/Sample_Image/G1B2%20Player.png
  :width: 700
 

**2. 경험을 바탕으로 한 수정전략**
================

Inverse Gamblers' Fallacy의 일종이라고 할 수 있겠습니다. 
플레이어는 int(Turning_point) 값의 판 수를 기본전략으로 게임합니다.
플레이어는 문득 Hit과 Stay해야할 범위를 수정해야 할 필요성을 느낍니다. 

player.hand_but(2)는 플레이어가 게임을 시작하자마자 받은 두 장의 카드의 점수 합이고, 
dealer.cards[1].value는 딜러의 테이블에 최초로 오픈된 카드의 점수를 의미합니다. 
플레이어는 랜덤에 불과한 사건들을 재해석하고 간섭하여 새로운 전략을 세웁니다. 

 순서
  1. 이전 게임을 복기하고, 자신의 손패와 딜러의 손패가 어땠을 때 패했는지 기억해냅니다. 
  2. 그 중 가장 많은 패배를 기록했을 때 자신의 손패(=Player_worst)와 딜러의 손패(=Dealer_Lucky)에 트라우마가 남습니다. 
  3. 자신이 Player_worst보다 낮은 손패이면 자신이 12~16이더라도 상대방의 패와 상관없이 Hit합니다. 
  4. 딜러가 Dealer_Lucky보다 낮은 손패이면 자신이 12~16이더라도 Burst 확률이 없다고 보고 Hit합니다.

예를 들어, Player_worst = 13 이면 손 패가 12, 13일 때 딜러가 2~6이 나왔더라도 Stay 하지 않고 Hit합니다.
Dealer_Lucky = 4 이면 딜러가 4 이하에서 이길 확률이 높다고 생각해, 딜러가 2나 3이 나온다면 burst를 기대하지 않고 Hit합니다.
마지막으로 자신의 손패 합이 17이 나왔을 때, Dealer_Lucky = 4 이고, 딜러의 오픈된 패가 마침 4라고 하면, 
역시 burst를 기대하지 않고 Hit해버립니다. 

*수정 전략, '마틴게일 베팅'으로 플레이한 7번 가상의 플레이어의 전적* 
--------------------------------
.. image:: https://github.com/dalyulbam-cmd/Blackjack/blob/master/Sample_Image/G2B1%20Player.png
  :width: 700

*수정 전략, '운수 좋은 날 베팅'으로 플레이한 24번 가상의 플레이어의 전적* 
--------------------------------
.. image:: https://github.com/dalyulbam-cmd/Blackjack/blob/master/Sample_Image/G2B2%20Player.png
  :width: 700
  

**3. 미치광이 전략**
================

플레이어가 신내림을 받습니다. 극단적인 선택을 강행합니다. 
지금 테이블에 올라온 패에 따라 전략을 급격하게 수정합니다. 
일단 기본적인 전략으로 플레이를 하지만 어떤 조건이 충족되면 급변합니다. 

 순서
  1. 모든 Ace를 11에서 1로 계산합니다. 
  2. 자신이 12~16이라 burst될 위험에 처했음에도 딜러의 오픈된 카드가 10점짜리면 Stay합니다. 
  3. 자신이 받은 두 번째 카드가 6이하라면, 앞으로도 낮은 숫자가 나올 것이라 믿고 자신이 12~16이라도 Hit합니다. 
  4. 다만, 딜러의 오픈된 카드가 10점짜리고 자신이 받은 두 번째 카드가 6이하라면 자신감을 상실해 Stay합니다. 

실제로도 10,J,Q,K,A는 사람의 셔플링을 거쳤다면 같이 섞이는 경우가 많으며, 
낮은 수의 카드는 뭉쳐서 나올 확률이 높습니다. 
하지만 세 번째 플레이어의 생각만큼이나 큰 확률은 아닙니다. 

*미치광이 전략, '운수 좋은 날 베팅'으로 플레이한 14번 가상의 플레이어의 전적* 
--------------------------------
.. image:: https://github.com/dalyulbam-cmd/Blackjack/blob/master/Sample_Image/G3B2%20Player.png
  :width: 700



















